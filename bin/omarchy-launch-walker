#!/bin/bash

# Ensure elephant is running before launching walker
if ! pgrep -x elephant > /dev/null; then
  setsid uwsm-app -- elephant &
fi

# Ensure walker service is running
if ! pgrep -f "walker --gapplication-service" > /dev/null; then
  setsid uwsm-app -- walker --gapplication-service &
fi

# Note: NixOS Walker doesn't support --maxheight/--minheight yet, using --height instead
exec walker --width 644 --height 300 "$@"
